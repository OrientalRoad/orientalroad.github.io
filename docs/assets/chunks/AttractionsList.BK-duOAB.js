import{d as b,u as I,l as A,z as v,c as u,o as m,F as M,e as k,C as l,G as w,n as C,x as c,I as h,w as L,g as N,t as _,a as x,_ as $}from"./framework.CDATIFxo.js";import{g as B}from"./index.BaOabKnd.js";import{d as D}from"./constants.Ca-t9bhs.js";function R(a,r){const[d,g]=a.split(",").map(Number),[s,i]=r.split(",").map(Number);function t(y){return y*Math.PI/180}const n=t(s-d),o=t(i-g),e=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t(d))*Math.cos(t(s))*Math.sin(o/2)*Math.sin(o/2),f=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return Number((6371*f).toFixed(1))}const S={key:0},T={class:"container"},z={class:"cover"},E={class:"title"},V={key:0},q={class:"type"},F=b({__name:"AttractionsList",props:{city:{type:String,required:!0},limit:{type:Number},showMap:{type:Boolean,default:!1},nearby:{type:String},exclude:{type:Array}},setup(a){const{localeIndex:r,frontmatter:p}=I(),d=A(()=>{var i;let s=(i=B())==null?void 0:i.filter(t=>t.city===a.city);if(Array.isArray(a.exclude)&&(s=s.filter(t=>!a.exclude.includes(t.name))),typeof a.nearby=="string"){s.forEach((n,o)=>{s[o].distance=typeof n.location=="string"?R(a.nearby,n.location):1/0}),s=s.sort((n,o)=>n.distance-o.distance);const t=[];for(const n of s)if(n.distance<=10)t.push(n);else{if(t.length>=6)break;t.push(n)}s=t}return typeof a.limit=="number"&&(s=s.slice(0,a.limit)),s}),g=A(()=>d.value.filter(s=>typeof(s==null?void 0:s.location)=="string").map(s=>`${s.location},${s.nameLocale[r.value]}`).join("|"));return(s,i)=>{const t=v("LazyLoadImage"),n=v("Link"),o=v("Translate");return m(),u(M,null,[a.showMap&&g.value.length?(m(),u("div",S)):k("",!0),l("div",T,[(m(!0),u(M,null,w(d.value,e=>(m(),u("dl",{key:e.name},[l("dd",{class:C(["attraction",{small:c(p).layout==="city"||c(p).layout==="attraction"}])},[l("article",null,[l("div",z,[h(n,{href:`/${a.city.toLowerCase()}/attractions/${e.link}`},{default:L(()=>[h(t,{src:e!=null&&e.avatar?c(N)(e==null?void 0:e.avatar):c(D),alt:e==null?void 0:e.name},null,8,["src","alt"])]),_:2},1032,["href"])]),l("div",null,[l("div",E,[h(n,{href:`/${a.city.toLowerCase()}/attractions/${e.link}`},{default:L(()=>{var f,y;return[l("div",null,_((f=e==null?void 0:e.nameLocale)==null?void 0:f[c(r)]),1),e!=null&&e.distance?(m(),u("div",V,[x(_(e.distance)+" ",1),l("span",null,[h(o,null,{default:L(()=>i[0]||(i[0]=[x(" km away")])),_:1})])])):k("",!0),l("div",q,_((y=e==null?void 0:e.introduce)==null?void 0:y[c(r)]),1)]}),_:2},1032,["href"])])])])],2)]))),128))])],64)}}}),G=$(F,[["__scopeId","data-v-8dc051e3"]]);export{G as A};
