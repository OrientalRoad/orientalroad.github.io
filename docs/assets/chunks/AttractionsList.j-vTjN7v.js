import{j as b,G as I,f as _,E as g,l as u,m,F as M,q as k,x as a,y as N,v as w,u as r,B as h,D as L,K as C,z as A,A as x,_ as B}from"./framework.DNEL1Zu6.js";import{g as D}from"./index.Bly_7SWI.js";import{d as $}from"./constants.D1E43WBj.js";function E(l,c){const[d,v]=l.split(",").map(Number),[s,i]=c.split(",").map(Number);function t(y){return y*Math.PI/180}const n=t(s-d),o=t(i-v),e=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t(d))*Math.cos(t(s))*Math.sin(o/2)*Math.sin(o/2),f=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return Number((6371*f).toFixed(1))}const R={key:0},S={class:"container"},T={class:"cover"},q={class:"title"},z={key:0},V={class:"type"},F=b({__name:"AttractionsList",props:{city:{type:String,required:!0},limit:{type:Number},showMap:{type:Boolean,default:!1},nearby:{type:String},exclude:{type:Array}},setup(l){const{localeIndex:c,frontmatter:p}=I(),d=_(()=>{var i;let s=(i=D())==null?void 0:i.filter(t=>t.city===l.city);if(Array.isArray(l.exclude)&&(s=s.filter(t=>!l.exclude.includes(t.name))),typeof l.nearby=="string"){s.forEach((n,o)=>{s[o].distance=typeof n.location=="string"?E(l.nearby,n.location):1/0}),s=s.sort((n,o)=>n.distance-o.distance);const t=[];for(const n of s)if(n.distance<=10)t.push(n);else{if(t.length>=6)break;t.push(n)}s=t}return typeof l.limit=="number"&&(s=s.slice(0,l.limit)),s}),v=_(()=>d.value.filter(s=>typeof(s==null?void 0:s.location)=="string").map(s=>`${s.location},${s.nameLocale[c.value]}`).join("|"));return(s,i)=>{const t=g("LazyLoadImage"),n=g("Link"),o=g("Translate");return m(),u(M,null,[l.showMap&&v.value.length?(m(),u("div",R)):k("",!0),a("div",S,[(m(!0),u(M,null,N(d.value,e=>(m(),u("dl",{key:e.name},[a("dd",{class:w(["attraction",{small:r(p).layout==="city"||r(p).layout==="attraction"}])},[a("article",null,[a("div",T,[h(n,{href:`/${l.city.toLowerCase()}/attractions/${e.link}`},{default:L(()=>[h(t,{src:e!=null&&e.avatar?r(C)(e==null?void 0:e.avatar):r($),alt:e==null?void 0:e.name},null,8,["src","alt"])]),_:2},1032,["href"])]),a("div",null,[a("div",q,[h(n,{href:`/${l.city.toLowerCase()}/attractions/${e.link}`},{default:L(()=>{var f,y;return[a("div",null,A((f=e==null?void 0:e.nameLocale)==null?void 0:f[r(c)]),1),e!=null&&e.distance?(m(),u("div",z,[x(A(e.distance)+" ",1),a("span",null,[h(o,null,{default:L(()=>i[0]||(i[0]=[x(" km away")])),_:1})])])):k("",!0),a("div",V,A((y=e==null?void 0:e.introduce)==null?void 0:y[r(c)]),1)]}),_:2},1032,["href"])])])])],2)]))),128))])],64)}}}),G=B(F,[["__scopeId","data-v-8dc051e3"]]);export{G as A};
